<div class="container mt-4">

    <div class="d-flex justify-content-between align-items-center mb-3">
        <h3 class="m-0">Listagem de Produtos</h3>
        <button class="btn btn-success" routerLink="/produtos/adicionar">
            <i class="bi bi-plus-circle"></i> Adicionar Produto
        </button>
    </div>

    <div class="input-group mb-3">
        <input type="text" class="form-control" placeholder="Filtrar por nome" [(ngModel)]="filtroNome" (input)="filtrarProdutos()">
    </div>
  
    <div *ngIf="mensagemSucesso" class="alert alert-success">
        {{ mensagemSucesso }}
    </div>
    <div *ngIf="mensagemErro" class="alert alert-danger">
        {{ mensagemErro }}
    </div>

    <div *ngIf="loading" class="text-center my-3">
        <div class="spinner-border" role="status"></div>
        <p>Carregando produtos...</p>
    </div>

    <table class="table table-striped" *ngIf="!loading && produtosFiltrados.length > 0">
        <thead>
            <tr>
                <th>Nome</th>
                <th>Quantidade</th>
                <th>Categoria</th>
                <th>Ações</th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let produto of produtosFiltrados">
                <td>{{ produto.nome }}</td>
                <td>{{ produto.quantidade }}</td>
                <td>{{ produto.categoria_descricao }}</td>
                <td>
                <button class="btn btn-primary btn-sm me-2" (click)="editarProduto(produto.id)">
                    Editar
                </button>
                <button class="btn btn-danger btn-sm" (click)="deletarProduto(produto.id)">
                    Deletar
                </button>
                </td>
            </tr>
        </tbody>
    </table>

    <div *ngIf="!loading && produtos.length === 0" class="text-center my-3">
        <p>Nenhum produto encontrado.</p>
    </div>
</div>
